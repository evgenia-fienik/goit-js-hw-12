{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44774351-929c2aa0766411c652402d8c1';\n\n//отримання зображень з API pixabay\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  const response = await axios.get(url);\n  if (!response.status === 200) {\n    throw new Error(response.status);\n  }\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n// відображає галерею зображень на основі масиву зображень\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images.map(image => createImageCard(image)).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\n//приймає об'єкт зображення як параметр та повертає HTML-код для картки зображення\nfunction createImageCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n  <div class=\"photo-card\">\n  <a href=\"${largeImageURL}\">\n    <img cass=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n    </a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes </b>${likes}</p>\n        <p  class=\"info-item\"><b>Views </b>${views}</p>\n        <p class=\"info-item\"><b>Comments </b>${comments}</p>\n        <p class=\"info-item\"><b>Downloads </b>${downloads}</p>\n      </div>\n</div>`;\n}\n\n//відображає повідомлення у вигляді сповіщення\nexport function showNotification(message, type = 'info') {\n  iziToast[type]({\n    title: '',\n    message: message,\n    position: 'topRight',\n  });\n}\n\n// очищує галерею зображень\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\n//відображає індикатор завантаження\nexport function showLoader() {\n  document.querySelector('.loader').classList.remove('hidden');\n}\n\n//ховає індикатор завантаження\nexport function hideLoader() {\n  document.querySelector('.loader').classList.add('hidden');\n}\n\n//обчислення висоти картки галереї\nexport function getCardHeight() {\n  const gallery = document.querySelector('.gallery');\n  const firstCard = gallery.querySelector('.photo-card');\n  return firstCard ? firstCard.getBoundingClientRect().height : 0;\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport {\n  renderImages,\n  showNotification,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  getCardHeight,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('#search-input');\n// const loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.btn-load-more');\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = input.value.trim();\n  if (!query) {\n    showNotification('Please enter a search query.', 'warning');\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  showLoader();\n  input.value = '';\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    hideLoader();\n    if (data.hits.length === 0) {\n      showNotification(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'error'\n      );\n      loadMoreBtn.classList.add('hidden'); // скриваємо кнопку якщо зображення відсутнє\n      return;\n    }\n    renderImages(data.hits);\n\n    if (data.hits.length === perPage) {\n      loadMoreBtn.classList.remove('hidden'); // покузує кнопку якщо є наступна группа зображень\n    } else {\n      loadMoreBtn.classList.add('hidden'); //скриваємо кнопку якщо зображення менше за perPage\n    }\n  } catch (error) {\n    hideLoader();\n    showNotification('Error: ' + error.message);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    hideLoader();\n    renderImages(data.hits);\n\n    if (data.hits.length < perPage) {\n      loadMoreBtn.classList.add('hidden'); // скриваємо кнопку якщо більше немає зображень\n      showNotification(\n        \"We're sorry, but you've reached the of search results.\",\n        'info'\n      );\n    }\n    //прокручування сторінки після завантаження нових зображень\n\n    const cardHeight = getCardHeight();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    hideLoader();\n    showNotification('Error:' + error.message);\n\n    loadMoreBtn.classList.add('hidden'); // скриває кнопку при помилці\n  }\n});\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","url","response","axios","lightbox","renderImages","images","gallery","markup","image","createImageCard","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showNotification","message","type","iziToast","clearGallery","showLoader","hideLoader","getCardHeight","firstCard","form","input","loadMoreBtn","event","data","error","cardHeight"],"mappings":"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"}